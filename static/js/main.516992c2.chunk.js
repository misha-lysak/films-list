(this["webpackJsonpfilms-list"]=this["webpackJsonpfilms-list"]||[]).push([[0],{29:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){},36:function(e,n,t){},37:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var c,i=t(1),s=t.n(i),a=t(22),r=t.n(a),l=(t(29),t(30),t(31),t(0)),o=function(e){var n=e.image,t=e.genreIds,c=e.title,s=e.year,a=e.genres,r=Object(i.useMemo)((function(){return a.filter((function(e){var n=e.id;return t.includes(n)}))}),[t]);return Object(l.jsxs)("div",{className:"filmCardWrapper",children:[Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(n),alt:c,className:"image"}),Object(l.jsxs)("div",{className:"contentWrapper",children:[Object(l.jsxs)("div",{className:"contentTop",children:[Object(l.jsx)("h4",{className:"title",children:c}),Object(l.jsx)("p",{className:"year",children:s})]}),Object(l.jsx)("div",{className:"genresWrapper",children:r.map((function(e,n,t){return Object(l.jsx)("p",{className:"genre",children:n!==t.length-1?"".concat(e.name,", "):e.name},e.id)}))})]})]})},d=(t(33),function(e){var n=e.filmList,t=e.genres;return Object(l.jsx)("div",{className:"filmListWrapper",children:(null===n||void 0===n?void 0:n[0])?null===n||void 0===n?void 0:n.map((function(e){return Object(l.jsx)(o,{image:e.poster_path,genreIds:e.genre_ids,title:e.title,year:e.release_date,genres:t},e.id)})):Object(l.jsx)("div",{className:"noResults",children:"Can't find some films with this genres"})})}),u=(t(34),function(){return Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("div",{className:"title",children:"Film Searcher"})})}),j=t(13),O=t(3),p=(t(35),function(e){var n,t=e.handleSelectOption,c=e.options,s=function(e){var n=Object(i.useState)(!1),t=Object(O.a)(n,2),c=t[0],s=t[1],a=Object(i.useState)([]),r=Object(O.a)(a,2),l=r[0],o=r[1],d=Object(i.useCallback)((function(){s(!c)}),[c]);return{isOpenSelect:c,selectedOptions:l,handleOpenSelect:d,handleRemoveSelectedOption:function(n){var t=l.filter((function(e){return e.id!==n}));o(t),e({genresIds:t.map((function(e){return e.id}))})},setSelectOptions:o}}(t),a=s.isOpenSelect,r=s.selectedOptions,o=s.handleOpenSelect,d=s.handleRemoveSelectedOption,u=s.setSelectOptions;return Object(l.jsxs)("div",{className:"selectWrapper",children:[Object(l.jsxs)("div",{className:"select",children:[(null===r||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)?null===r||void 0===r?void 0:r.map((function(e){var n=e.id,t=e.name;return Object(l.jsxs)("div",{className:"chosenOptionsWrapper",onClick:function(){return d(n)},children:[Object(l.jsx)("span",{className:"chosenOptionName",children:t}),Object(l.jsx)("div",{className:"deleteChosenOption",children:"+"})]},n)})):Object(l.jsx)("p",{className:"emptyValue",children:"Choose some category"}),Object(l.jsx)("div",{className:"toggleOpenSelect",onClick:function(){return o()},children:"\u27be"})]}),a&&Object(l.jsx)("div",{className:"optionsWrapper",children:c.filter((function(e){return!(null===r||void 0===r?void 0:r.some((function(n){return n.id===e.id})))})).map((function(e){var n=e.id,c=e.name;return Object(l.jsx)("div",{onClick:function(){t({genresIds:[].concat(Object(j.a)(r.map((function(e){return e.id}))),[n])}),u((function(e){return[].concat(Object(j.a)(e),[{id:n,name:c}])})),o()},className:"option",children:c},n)}))})]})}),b=s.a.memo(p),h=t(4),m=t(9),f=t.n(m),v=(t(36),function(e){var n=e.count,t=e.handlePagination,c=function(e,n){var t=Object(i.useState)(1),c=Object(O.a)(t,2),s=c[0],a=c[1];return{tabs:[e&&s+1>e?s-5:null,e&&s+2>e?s-4:null,e&&s+3>e?s-3:null,s-2>1?s-2:null,s-1>1?s-1:null,1===s||s===e?null:s,e&&s+1<e?s+1:null,e&&s+2<e?s+2:null,s-2<1?s+3:null,s-3<1?s+4:null],selectedTab:s,handleSelect:function(e){"string"!==typeof e&&s!==e&&n&&(n({page:e,isFetch:!(e%2===0&&e-1===s||e%2!==0&&e+1===s)}),a(e))}}}(n,t),s=c.tabs,a=c.selectedTab,r=c.handleSelect;return Object(l.jsx)(l.Fragment,{children:n&&Object(l.jsxs)("div",{className:"paginationWrapper",children:[Object(l.jsx)("div",{onClick:function(){r(1)},className:f()("first",Object(h.a)({},"selected",1===a)),children:"1"}),Object(l.jsx)("div",{className:"dynamicTabsWrapper",children:s.map((function(e){return Object(l.jsx)(l.Fragment,{children:e&&Object(l.jsx)("div",{onClick:function(){r(e)},className:f()("tab",Object(h.a)({},"selected",a===e)),children:e})})}))}),Object(l.jsx)("div",{onClick:function(){r(n)},className:f()("last",Object(h.a)({},"selected",a===n)),children:n})]})})});!function(e){e.SORT_ASC="release_date.asc",e.SORT_DESC="release_date.desc"}(c||(c={}));t(37);var g=function(e){var n=function(e){var n=Object(i.useState)(!1),t=Object(O.a)(n,2),s=t[0],a=t[1],r=Object(i.useState)(""),l=Object(O.a)(r,2),o=l[0],d=l[1],u=Object(i.useCallback)((function(){a(!s)}),[s]),j=Object(i.useMemo)((function(){return[{id:c.SORT_ASC,name:"By oldest"},{id:c.SORT_DESC,name:"By newest"}]}),[]);return{isOpenSelect:s,sortBy:o,sortValues:j,handleSelect:function(n,t){e({sortValue:t}),d(n)},handleOpenSelect:u}}(e.handleSort),t=n.isOpenSelect,s=n.sortBy,a=n.sortValues,r=n.handleSelect,o=n.handleOpenSelect;return Object(l.jsxs)("div",{className:"sortWrapper",children:[Object(l.jsxs)("div",{onClick:function(){return o()},className:"select",children:[s?Object(l.jsx)("span",{className:"chosenOptionName",children:s}):Object(l.jsx)("span",{className:"chosenOptionName",children:"Sort"}),Object(l.jsx)("div",{className:"toggleOpenSelect",onClick:function(){return o()},children:"\u27be"})]}),t&&Object(l.jsx)("div",{className:"optionsWrapper",children:a.map((function(e){var n=e.id,t=e.name;return Object(l.jsx)("div",{onClick:function(){o(),r(t,n)},className:"option",children:t},n)}))})]})},x=t(11),S=t(12),N=t.n(S),y=t(23),_=t(24),C=t.n(_),k="55603383b6e7d248eaf4b2df9f74c6ec",w="/genre/movie/list?api_key=".concat(k,"&language=en-US"),W="/discover/movie?api_key=".concat(k,"&language=en-US"),T=C.a.create({baseURL:"https://api.themoviedb.org/3",responseType:"json"}),F=function(){var e=Object(y.a)(N.a.mark((function e(n,t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.get("".concat(w).concat(n)).then((function(e){t(e.data.genres)})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),R=function(e,n){return T.get("".concat(W).concat(e)).then((function(e){n(e.data)}))},I=(t(57),function(){var e,n,t=function(){var e=Object(i.useState)(!0),n=Object(O.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(),r=Object(O.a)(a,2),l=r[0],o=r[1],d=Object(i.useState)([]),u=Object(O.a)(d,2),j=u[0],p=u[1],b=Object(i.useState)({with_genres:"",sort_by:"",page:1}),h=Object(O.a)(b,2),m=h[0],f=h[1];return s.a.useEffect((function(){R("",o)}),[]),s.a.useEffect((function(){F("",p)}),[]),{films:l,setFilms:o,genres:j,setGenres:p,handleSelectOption:function(e){var n=e.join(",");R("&with_genres=".concat(n),o)},handleSort:function(e){R("&sort_by=".concat(e),o)},handlePagination:function(e){R("&page=".concat(Math.ceil(e/2)),o)},handleSearch:function(e){var n=e.genresIds,t=e.sortValue,i=e.page,s=e.isFetch,a=void 0===s||s,r=i&&(i%2===0||i-1===m.page);c(!!r);var l=Object(x.a)(Object(x.a)({},m),{},{with_genres:(null===n||void 0===n?void 0:n.join(","))||m.with_genres,sort_by:null!==t&&void 0!==t?t:m.sort_by,page:Math.ceil((null!==i&&void 0!==i?i:null===m||void 0===m?void 0:m.page)/2)});f(l);var d=Object.entries(l).map((function(e){return"&".concat(e[0],"=").concat(e[1])}));a&&R(null===d||void 0===d?void 0:d.join(""),o)},isFirstDicker:t}}(),c=t.films,a=t.genres,r=t.handleSearch,o=t.isFirstDicker;return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(u,{}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)("div",{className:"contentTop",children:[Object(l.jsx)(b,{options:a,handleSelectOption:r}),Object(l.jsx)(g,{handleSort:r})]}),Object(l.jsx)(d,{genres:a,filmList:o?null===c||void 0===c||null===(e=c.results)||void 0===e?void 0:e.slice(0,10):null===c||void 0===c||null===(n=c.results)||void 0===n?void 0:n.slice(10)}),Object(l.jsx)(v,{handlePagination:r,count:null===c||void 0===c?void 0:c.total_pages})]})]})});var B=function(){return Object(l.jsx)("div",{className:"app",children:Object(l.jsx)(I,{})})};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(B,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.516992c2.chunk.js.map